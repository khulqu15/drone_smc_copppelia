# UAV Fault Data Analysis

This repository contains Python code for analyzing fault data in UAV (Unmanned Aerial Vehicle) flight data, primarily to understand and detect failures in UAV operations based on comparisons between actual and target data.

The program utilizes data from UAV flight logs generated in Simulink to identify and categorize types of failures (faults) based on the residuals between the expected (target) values and the actual values. This analysis is crucial for enhancing the safety and operational efficiency of UAVs.

## Concept Fault in the Program
1. Residual Calculation
   
    The residuals are calculated as the difference between the actual and target values for each parameter. This can be formally expressed as:

    ![\Large R=A-T](https://latex.codecogs.com/svg.latex?\Large&space;R=A-T) 

    where ùëÖ represents the residuals, ùê¥ is the matrix of actual values, and ùëá is the matrix of target values.

2. Standard Deviation and Threshold

    The program computes the standard deviation of the residuals to establish a threshold for detecting faults. This involves calculating the standard deviation for each parameter across the dataset:
    
    ![\Large \sigma=\sqrt{\frac{1}{N}\sum_{i=1}^{N}{xi-\mu}}](https://latex.codecogs.com/svg.latex?\Large&space;\sigma=\sqrt{\frac{1}{N}\sum_{i=1}^{N}{xi-\mu}}) 

    where ùúé is the standard deviation, represents individual data points, ùúá is the mean of the data, and ùëÅ is the total number of data points.

    The faults are then identified where the absolute value of the residuals exceeds a certain multiple (threshold factor) of the standard deviation:

    ![\Large \sigma=\sqrt{\frac{1}{N}\sum_{i=1}^{N}{xi-\mu}}](https://latex.codecogs.com/svg.latex?\Large&space;{if}|R_i|>k.\sigma) 

    where ùëò is the threshold factor (default is 2 in the program, which corresponds to a common practice of considering values beyond two standard deviations as potential outliers).

## Fault Data Representation
In our fault data analysis, we employ various data representation methods to clarify and deepen the understanding of the failures that occur. Here are the types of representations used:

1. Numeric Fault
   
    Numeric representation involves the use of a severity index, which is a scalar value describing the severity of the failure based on the difference between actual and target measurements.

    The severity index is calculated by dividing the absolute value of the residual by the standard deviation of the residual, as described in the Severity Index equation above.

2. Categorical Fault
   
    Categorical faults are classified into several categories such as 'Low', 'Medium', and 'High', representing the severity levels of the failures.

    Categories are generated by segmenting the severity index scale using the pd.cut() function in Pandas, which divides the data range into intervals based on defined thresholds.

3. Spatial Fault
   
    Spatial representation refers to mapping failures in the context of geographical or spatial locations. For instance, in UAV applications, failure locations can be marked on a map.

    If the data includes location information (such as GPS coordinates), failures can be associated with their geographical positions for further analysis. This is done by combining location data with failure indicators.

4. Multidimensional Fault
   
    Multidimensional representation involves using vectors or matrices that encompass various failure indicators for each observation.

    Multidimensional representation can be achieved by combining multiple fault data columns, such as severity index and category, into a single DataFrame, providing a holistic view of the failures.

Each of these representation types offers a different perspective on failure data and can be selected based on analysis needs. For instance, numeric and categorical representations are very useful for statistical analysis and quick decision-making, whereas spatial and multidimensional representations are more suitable for in-depth analysis and visualizing complex data.

## Result
![Image](./results/actual.png)
![Image](./results/smc.png)

### Stability and Faults
In the 'Actual Roll' graph, the data shows very stable values after the initial period, with several fault markers appearing when the data is stable. Stability is usually not considered a fault in many contexts. However, in this case, the marked faults might be related to unexpected or undesired conditions. For example, in drone control, if the 'roll' remains too stable during maneuvers that should result in roll variations, this could be interpreted as a system failure to respond to commands or a sensor issue causing constant readings.

### Axis Analysis
In the 'Actual X', 'Y', and 'Z' graphs, the data shows stable values except at the beginning, where large fluctuations occur. These fluctuations seem to be when faults are identified, which makes sense as sudden changes could indicate disturbances or errors.

Similar to 'Roll', the 'Pitch' and 'Yaw' plots show high levels of stability after the initial fluctuations. Fault markers appearing during stable conditions could indicate issues as described above.

In specific applications like flight control for drones, proper response to environmental condition changes or commands is crucial. If the control system fails to respond by changing position or orientation as expected, this can be considered a fault.

### Conclusion
From these plots, fault markers during stable conditions indicate potential issues in system responsiveness or sensor accuracy. It's essential to further investigate the control system and sensors to ensure all components function according to specifications. Errors in reading or interpreting sensor data can lead to poor performance or even failures in drone operations, especially in conditions requiring quick and accurate responses to control inputs. Further analysis with additional data, such as control command logs and environmental conditions, would be very helpful in identifying the exact cause of the detected faults.

![Image](./results/spectogram.png)

### Roll
The color range from purple to yellow indicates power intensity from low to high. The yellow area near the vertical axis at the initial time indicates the presence of high-frequency components at the beginning of data collection.

There are red dashed lines marking the samples at 157 seconds and 137 seconds, which may indicate moments of issues or significant events related to motor 1 and motor 2.

Throughout the duration, it is observed that the dominant frequency lies in the very low range (almost close to 0 Hz), indicating that the 'Roll' changes tend to be stable or occur very slowly over time.

### Pitch
Similar to 'Roll', but with slightly more color variation at the beginning, indicating higher frequency strength variation at the start of the session.

The red lines on the 'Pitch' spectrogram also mark samples at 157 and 137 seconds, indicating the same significant moments as in 'Roll'.

### Yaw

The colors on the 'Yaw' spectrogram are very uniform, indicating stability in the frequency components throughout the data collection session.

As with the other two spectrograms, the red lines indicate the same times, marking significant events.

### Conclusion
The red dashed lines indicate potential failures or condition changes in motor 1 and motor 2, as mentioned in your description. This is a strong indication that there are significant changes in the drone's dynamic behavior related to these failures.

The broad consistency in color indicates the absence of large fluctuations in frequency except at certain points, which can be linked to technical issues in the drone.

For a more detailed and specific analysis, more context about the data and the operational parameters of the drone during this data collection would be needed.
# UAV Fault Data Analysis

This repository contains Python code for analyzing fault data in UAV (Unmanned Aerial Vehicle) flight data, primarily to understand and detect failures in UAV operations based on comparisons between actual and target data.

The program utilizes data from UAV flight logs generated in Simulink to identify and categorize types of failures (faults) based on the residuals between the expected (target) values and the actual values. This analysis is crucial for enhancing the safety and operational efficiency of UAVs.

## Concept Fault in the Program
1. Residual Calculation
   
    The residuals are calculated as the difference between the actual and target values for each parameter. This can be formally expressed as:

    ![\Large R=A-T](https://latex.codecogs.com/svg.latex?\Large&space;R=A-T) 

    where 𝑅 represents the residuals, 𝐴 is the matrix of actual values, and 𝑇 is the matrix of target values.

2. Standard Deviation and Threshold

    The program computes the standard deviation of the residuals to establish a threshold for detecting faults. This involves calculating the standard deviation for each parameter across the dataset:
    
    ![\Large \sigma=\sqrt{\frac{1}{N}\sum_{i=1}^{N}{xi-\mu}}](https://latex.codecogs.com/svg.latex?\Large&space;\sigma=\sqrt{\frac{1}{N}\sum_{i=1}^{N}{xi-\mu}}) 

    where 𝜎 is the standard deviation, represents individual data points, 𝜇 is the mean of the data, and 𝑁 is the total number of data points.

    The faults are then identified where the absolute value of the residuals exceeds a certain multiple (threshold factor) of the standard deviation:

    ![\Large \sigma=\sqrt{\frac{1}{N}\sum_{i=1}^{N}{xi-\mu}}](https://latex.codecogs.com/svg.latex?\Large&space;{if}|R_i|>k.\sigma) 

    where 𝑘 is the threshold factor (default is 2 in the program, which corresponds to a common practice of considering values beyond two standard deviations as potential outliers).

## Fault Data Representation
In our fault data analysis, we employ various data representation methods to clarify and deepen the understanding of the failures that occur. Here are the types of representations used:

1. Numeric Fault 

Representasi numerik melibatkan penggunaan indeks keparahan, yang merupakan nilai skalar yang menggambarkan tingkat keparahan kegagalan berdasarkan perbedaan antara pengukuran aktual dan target.

Indeks keparahan dihitung dengan membagi nilai absolut residu dengan simpangan baku dari residu, sebagaimana dijelaskan dalam persamaan Indeks Keparahan di atas.

2. Categorical Fault 

Fault kategorikal diklasifikasikan menjadi beberapa kategori seperti 'Low', 'Medium', dan 'High', yang menggambarkan tingkat keparahan kegagalan.

Kategori dihasilkan dengan membagi skala indeks keparahan menggunakan fungsi pd.cut() dalam Pandas, yang membagi rentang data menjadi beberapa interval berdasarkan ambang batas yang ditetapkan.

3. Spatial Fault 

Representasi spatial mengacu pada pemetaan kegagalan dalam konteks lokasi geografis atau spatial, misalnya, dalam aplikasi UAV, lokasi kegagalan dapat ditandai pada peta.

Jika data termasuk informasi lokasi (seperti koordinat GPS), kegagalan dapat dikaitkan dengan posisi geografis mereka untuk analisis lebih lanjut. Ini dilakukan dengan menggabungkan data lokasi dengan indikator kegagalan.

4. Multidimensional Fault

Representasi multidimensional melibatkan penggunaan vektor atau matriks yang mencakup berbagai indikator kegagalan untuk setiap pengamatan.

Representasi multidimensional bisa diwakili dengan menggabungkan beberapa kolom data fault seperti indeks keparahan dan kategori ke dalam satu DataFrame, menyediakan pandangan holistik terhadap kegagalan.

Each of these representation types offers a different perspective on failure data and can be selected based on analysis needs. For instance, numeric and categorical representations are very useful for statistical analysis and quick decision-making, whereas spatial and multidimensional representations are more suitable for in-depth analysis and visualizing complex data."

## Result
![Image](./results/actual.png)
![Image](./results/smc.png)

### Stabilitas dan Fault
Pada grafik 'Actual Roll', data menunjukkan nilai yang sangat stabil setelah waktu awal dan terdapat beberapa penanda fault yang muncul ketika data stabil. Stabilitas biasanya tidak dianggap sebagai kesalahan dalam banyak konteks. Namun, dalam kasus ini, bisa jadi fault yang ditandai mungkin berkaitan dengan kondisi yang tidak terduga atau tidak diinginkan. Misalnya, dalam konteks kontrol drone, jika 'roll' terlalu stabil selama manuver yang seharusnya menghasilkan variasi pada 'roll', ini bisa diinterpretasikan sebagai kegagalan sistem dalam merespons perintah atau adanya masalah pada sensor yang menyebabkan pembacaan yang tetap.

### Analisis Tiap Axis
Pada 'Actual X', 'Y', dan 'Z', grafik menunjukkan nilai yang stabil kecuali pada awalnya, dimana terjadi fluktuasi besar. Fluktuasi ini tampaknya adalah saat fault diidentifikasi, yang masuk akal karena perubahan mendadak bisa menunjukkan gangguan atau error.

Mirip dengan 'Roll', plot 'Pitch' dan 'Yaw' menunjukkan tingkat stabilitas yang tinggi setelah fluktuasi awal. Penanda fault yang muncul pada kondisi stabil ini bisa menunjukkan adanya masalah seperti yang sudah dijelaskan di atas.

Dalam aplikasi tertentu seperti kendali penerbangan untuk drone, respons yang tepat terhadap perubahan kondisi lingkungan atau komando adalah krusial. Jika sistem kontrol gagal merespons dengan cara mengubah posisi atau orientasi seperti yang diharapkan, ini bisa dianggap sebagai fault.

### Kesimpulan
Dari plot ini, penanda fault pada kondisi stabil menunjukkan kemungkinan masalah dalam responsivitas sistem atau keakuratan sensor. Sangat penting untuk melakukan investigasi lebih lanjut terhadap sistem kontrol dan sensor untuk memastikan bahwa semua komponen berfungsi sesuai spesifikasi. Kesalahan dalam membaca atau interpretasi data sensor bisa mengakibatkan performa yang buruk atau bahkan kegagalan dalam operasi drone, terutama dalam kondisi yang memerlukan respons cepat dan akurat terhadap input kontrol. Analisis lebih lanjut dengan data tambahan, seperti log perintah kontrol dan kondisi lingkungan, akan sangat membantu dalam mengidentifikasi penyebab pasti dari fault yang terdeteksi.

![Image](./results/spectogram.png)

### Roll
Rentang warna dari ungu ke kuning menunjukkan intensitas daya dari rendah ke tinggi. Daerah kuning mendekati sumbu vertikal pada waktu awal menunjukkan keberadaan komponen frekuensi yang tinggi pada awal pengambilan data.

Ada garis putus-putus merah yang menandai sampel pada waktu 157 detik dan 137 detik, yang mungkin menunjukkan saat terjadinya masalah atau kejadian penting pada motor 1 dan motor 2.

Sepanjang durasi, terlihat bahwa frekuensi yang dominan berada di rentang yang sangat rendah (hampir mendekati 0 Hz), yang menunjukkan bahwa perubahan 'Roll' cenderung stabil atau berlangsung sangat perlahan sepanjang waktu.

### Pitch
Hampir sama dengan 'Roll', tetapi dengan sedikit lebih banyak variasi warna di awal, menunjukkan variasi kekuatan frekuensi yang lebih tinggi pada awal sesi.

Garis merah pada spektrogram 'Pitch' juga menandai sampel 157 dan 137, mengindikasikan momen penting yang sama seperti pada 'Roll'.

### Yaw

Warna pada spektrogram 'Yaw' sangat seragam, menunjukkan kestabilan dalam komponen frekuensi sepanjang sesi pengambilan data.

Sama seperti dua spektrogram lainnya, garis merah menunjukkan waktu yang sama dan menandai kejadian penting.

### Kesimpulan
Garis merah putus-putus menunjukkan potensi kegagalan atau perubahan kondisi pada motor 1 dan motor 2, seperti yang disebutkan dalam keterangan Anda. Ini adalah indikasi kuat bahwa ada perubahan signifikan dalam perilaku dinamis drone yang terkait dengan kegagalan ini.

Konsistensi warna yang luas menunjukkan tidak adanya fluktuasi besar dalam frekuensi kecuali pada titik-titik tertentu, yang bisa dihubungkan dengan masalah teknis pada drone.

Untuk analisis yang lebih mendetail dan spesifik, perlu diketahui lebih lanjut mengenai konteks data dan parameter operasional dari drone selama pengambilan data ini.